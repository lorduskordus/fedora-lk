modules:

  - type: rpm-ostree
    repos:
      - https://brave-browser-rpm-release.s3.brave.com/brave-browser.repo
      - https://raw.githubusercontent.com/lorduskordus/fedora-lk/refs/heads/main/files/repos/vscode.repo
      - https://raw.githubusercontent.com/lorduskordus/fedora-lk/refs/heads/main/files/repos/unityhub.repo
    keys:
      - https://brave-browser-rpm-release.s3.brave.com/brave-core.asc
      - https://packages.microsoft.com/keys/microsoft.asc
      - https://hub.unity3d.com/linux/repos/rpm/stable/repodata/repomd.xml.key
    install:
      - brave-browser
      - code
      - unityhub
      - python3-pip
      - virt-manager
      - wireshark
      - fish
      - ddcutil

  - type: default-flatpaks
    system:
      install:
        - org.torproject.torbrowser-launcher
        - com.vysp3r.ProtonPlus
        - com.usebottles.bottles
        - com.valvesoftware.Steam
        - io.gitlab.news_flash.NewsFlash
        - tv.plex.PlexDesktop
        - io.github.pwr_solaar.solaar
  
  # Fix wireshark not adding group
  - type: script
    snippets:
      - "grep -E '^wireshark:' /usr/lib/group | sudo tee -a /etc/group"
      
  - type: brew
  
  - type: files
    files:
      - source: system/common
        destination: /

  - type: justfiles
    validate: true
    include:
      - common

  - type: systemd
    system:
      enabled:
        - disable-intel-turboboost.service
